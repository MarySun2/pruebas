<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Convertir HTML a PDF</title>
    <!-- El script de la librería-->
    <script src="html2pdf.bundle.min.js"></script>
    <!--Nuestro script, que se encarga de crear el PDF usando la librería-->
    <script src="script.js"></script>
    <!-- Algunos estilos -->
    <!-- <link rel="stylesheet" href="style.css"> -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body>
    <button id="btnCrearPdf">Click aquí</button>
    
    <!-- Contenedor para mostrar los datos del alumno -->
    <div id="datos-alumno-container" class="mt-5">
        <h2>Información del Alumno</h2>
        <table class="table">
            <tbody id="datos-alumno-body">
                <!-- Aquí se mostrarán los datos del alumno -->
            </tbody>
        </table>
    </div>

    <!-- Contenedor para mostrar los datos por semana -->
    <div id="datos-semanales-container" class="mt-5">
        <h2>Datos Semanales</h2>
        <div id="semanas-accordion">
            <!-- Aquí se mostrarán los datos por semana -->
        </div>
    </div>
    <!--Cuadro Firma-->
    <div class="d-flex justify-content-left mb">
        <div class="m-2">
            <canvas id="canvas" width="200" height="100" style="border:1px solid black"></canvas><br>
            <h6>Firma: Alumno</h6>
        </div>
        <div class="m-2">
            <canvas id="canvas1" width="200" height="100" style="border:1px solid black"></canvas><br>
            <h6>Firma: Tutor Empresarial</h6>
        </div>
        <div class="m-2">
            <canvas id="canvas2" width="200" height="100" style="border:1px solid black"></canvas><br>
            <h6>Firma: Profesor </h6>
        </div>
    </div>
    
    <script>
        // Código para capturar la firma del usuario utilizando Canvas 
        //Alumno
        const canvas = document.getElementById('canvas');
        const context = canvas.getContext('2d');

        let isDrawing = false;
        let lastX = 0;
        let lastY = 0;

        function draw(e) {
            if (!isDrawing) return;
            context.beginPath();
            context.moveTo(lastX, lastY);
            context.lineTo(e.offsetX, e.offsetY);
            context.stroke();
            [lastX, lastY] = [e.offsetX, e.offsetY];
        }

        canvas.addEventListener('mousedown', (e) => {
            isDrawing = true;
            [lastX, lastY] = [e.offsetX, e.offsetY];
        });

        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', () => isDrawing = false);
        canvas.addEventListener('mouseout', () => isDrawing = false);
        
    </script>

<script>
    //otro codigo
    // Función para simular la inyección de datos
function injectData() {
// Datos del alumno
const datosAlumno = {
    centro_docente: "Colegio XYZ",
    tutor_centro_docente: "Juan Pérez",
    alumno: "María García",
    familia_profesional: "Informática",
    ciclo_formativo: "Desarrollo de Aplicaciones Web",
    centro_trabajo: "Empresa ABC",
    tutor_centro_trabajo: "Ana Martínez",
    periodo: "2024",
    horas: "20"
};

// Mostrar los datos del alumno en la tabla
const datosAlumnoTable = document.getElementById("datos-alumno-container");
const datosAlumnoHTML = `
    <h2>Información del Alumno</h2>
    <table class="table">
        <tbody>
            ${Object.entries(datosAlumno).map(([key, value]) => `
                <tr>
                    <td>${key.replace(/_/g, ' ').toUpperCase()}</td>
                    <td>${value}</td>
                </tr>
            `).join('')}
        </tbody>
    </table>`;
datosAlumnoTable.innerHTML = datosAlumnoHTML;

// Datos por semana (simulados)
const semanasData = [
    {
        semana: "",
        dias: [
            { fecha: "01/01/2024", entrada: "08:00", salida: "14:00", tarea: "Tarea 1", observaciones: "Observaciones 1" },
            { fecha: "02/01/2024", entrada: "08:30", salida: "15:00", tarea: "Tarea 2", observaciones: "Observaciones 2" },
            { fecha: "03/01/2024", entrada: "09:00", salida: "13:30", tarea: "Tarea 3", observaciones: "Observaciones 3" }
        ]
    },
    
        
    // Puedes agregar más semanas y días según sea necesario
];

// Mostrar los datos por semana en acordeón
const semanasAccordion = document.getElementById("semanas-accordion");
semanasData.forEach((semana, index) => {
    const collapseId = `collapse-${index}`;
    const weekRow = `
        <div class="accordion-item">
            <h2 class="accordion-header" id="heading-${index}">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                    data-bs-target="#${collapseId}" aria-expanded="false" aria-controls="${collapseId}">
                    ${semana.semana}
                </button>
            </h2>
            <div id="${collapseId}" " aria-labelledby="heading-${index}"
                data-bs-parent="#semanas-accordion">
                <div class="accordion-body">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>Fecha</th>
                                <th>Hora de Entrada</th>
                                <th>Hora de Salida</th>
                                <th>Tarea Realizada</th>
                                <th>Observaciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${semana.dias.map(dia => `
                                <tr>
                                    <td>${dia.fecha}</td>
                                    <td>${dia.entrada}</td>
                                    <td>${dia.salida}</td>
                                    <td>${dia.tarea}</td>
                                    <td>${dia.observaciones}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>`;
    semanasAccordion.innerHTML += weekRow;
});
}

// Llamar a la función para inyectar los datos al cargar la página
window.onload = injectData;
</script>
</body>

</html>